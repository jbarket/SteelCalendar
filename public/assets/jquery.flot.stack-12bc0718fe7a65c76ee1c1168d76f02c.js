!function(e){function t(e){function t(e,t){for(var i=null,n=0;n<t.length&&e!=t[n];++n)t[n].stack==e.stack&&(i=t[n]);return i}function i(e,i,n){if(null!=i.stack){var s=t(i,e.getData());if(s){for(var a,o,r,l,c,h,u,d=n.pointsize,p=n.points,f=s.datapoints.pointsize,g=s.datapoints.points,v=[],b=i.lines.show,y=i.bars.horizontal,x=d>2&&(y?n.format[2].x:n.format[2].y),_=b&&i.lines.steps,w=!0,C=y?1:0,k=y?0:1,S=0,D=0;;){if(S>=p.length)break;if(u=v.length,null==p[S]){for(m=0;d>m;++m)v.push(p[S+m]);S+=d}else if(D>=g.length){if(!b)for(m=0;d>m;++m)v.push(p[S+m]);S+=d}else if(null==g[D]){for(m=0;d>m;++m)v.push(null);w=!0,D+=f}else{if(a=p[S+C],o=p[S+k],l=g[D+C],c=g[D+k],h=0,a==l){for(m=0;d>m;++m)v.push(p[S+m]);v[u+k]+=c,h=c,S+=d,D+=f}else if(a>l){if(b&&S>0&&null!=p[S-d]){for(r=o+(p[S-d+k]-o)*(l-a)/(p[S-d+C]-a),v.push(l),v.push(r+c),m=2;d>m;++m)v.push(p[S+m]);h=c}D+=f}else{if(w&&b){S+=d;continue}for(m=0;d>m;++m)v.push(p[S+m]);b&&D>0&&null!=g[D-f]&&(h=c+(g[D-f+k]-c)*(a-l)/(g[D-f+C]-l)),v[u+k]+=h,S+=d}w=!1,u!=v.length&&x&&(v[u+2]+=h)}if(_&&u!=v.length&&u>0&&null!=v[u]&&v[u]!=v[u-d]&&v[u+1]!=v[u-d+1]){for(m=0;d>m;++m)v[u+d+m]=v[u+m];v[u+1]=v[u-d+1]}}n.points=v}}}e.hooks.processDatapoints.push(i)}var i={series:{stack:null}};e.plot.plugins.push({init:t,options:i,name:"stack",version:"1.2"})}(jQuery);