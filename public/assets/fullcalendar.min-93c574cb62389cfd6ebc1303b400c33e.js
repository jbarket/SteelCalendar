!function(t,e){function i(e){t.extend(!0,ye,e)}function n(i,n,c){function h(t){K?(k(),C(),A(),b(t)):u()}function u(){Z=n.theme?"ui":"fc",i.addClass("fc"),n.isRTL?i.addClass("fc-rtl"):i.addClass("fc-ltr"),n.theme&&i.addClass("ui-widget"),K=t("<div class='fc-content' style='position:relative'/>").prependTo(i),G=new a(Q,n),J=G.render(),J&&i.prepend(J),y(n.defaultView),t(window).resize(D),v()||p()}function p(){setTimeout(function(){!te.start&&v()&&b()},0)}function f(){t(window).unbind("resize",D),G.destroy(),K.remove(),i.removeClass("fc fc-rtl ui-widget")}function g(){return 0!==re.offsetWidth}function v(){return 0!==t("body")[0].offsetWidth}function y(e){if(!te||e!=te.name){he++,P();var i,n=te;n?((n.beforeHide||j)(),O(K,K.height()),n.element.hide()):O(K,1),K.css("overflow","hidden"),te=le[e],te?te.element.show():te=le[e]=new we[e](i=ne=t("<div class='fc-view fc-view-"+e+"' style='position:absolute'/>").appendTo(K),Q),n&&G.deactivateButton(n.name),G.activateButton(e),b(),K.css("overflow",""),n&&O(K,1),i||(te.afterShow||j)(),he--}}function b(t){if(g()){he++,P(),ie===e&&k();var n=!1;!te.start||t||te.start>ue||ue>=te.end?(te.render(ue,t||0),S(!0),n=!0):te.sizeDirty?(te.clearEvents(),S(),n=!0):te.eventsDirty&&(te.clearEvents(),n=!0),te.sizeDirty=!1,te.eventsDirty=!1,T(n),ee=i.outerWidth(),G.updateTitle(te.title);var a=new Date;a>=te.start&&te.end>a?G.disableButton("today"):G.enableButton("today"),he--,te.trigger("viewDisplay",re)}}function _(){C(),g()&&(k(),S(),P(),te.clearEvents(),te.renderEvents(de),te.sizeDirty=!1)}function C(){t.each(le,function(t,e){e.sizeDirty=!0})}function k(){ie=n.contentHeight?n.contentHeight:n.height?n.height-(J?J.height():0)-N(K):Math.round(K.width()/Math.max(n.aspectRatio,.5))}function S(t){he++,te.setHeight(ie,t),ne&&(ne.css("position","relative"),ne=null),te.setWidth(K.width(),t),he--}function D(){if(!he)if(te.start){var t=++ce;setTimeout(function(){t==ce&&!he&&g()&&ee!=(ee=i.outerWidth())&&(he++,_(),te.trigger("windowResize",re),he--)},200)}else p()}function T(t){!n.lazyFetching||se(te.visStart,te.visEnd)?F():t&&I()}function F(){oe(te.visStart,te.visEnd)}function M(t){de=t,I()}function $(t){I(t)}function I(t){A(),g()&&(te.clearEvents(),te.renderEvents(de,t),te.eventsDirty=!1)}function A(){t.each(le,function(t,e){e.eventsDirty=!0})}function E(t,i,n){te.select(t,i,n===e?!0:n)}function P(){te&&te.unselect()}function R(){b(-1)}function z(){b(1)}function L(){o(ue,-1),b()}function W(){o(ue,1),b()}function H(){ue=new Date,b()}function B(t,e,i){t instanceof Date?ue=d(t):m(ue,t,e,i),b()}function q(t,i,n){t!==e&&o(ue,t),i!==e&&r(ue,i),n!==e&&l(ue,n),b()}function U(){return d(ue)}function V(){return te}function Y(t,i){return i===e?n[t]:(("height"==t||"contentHeight"==t||"aspectRatio"==t)&&(n[t]=i,_()),e)}function X(t,i){return n[t]?n[t].apply(i||re,Array.prototype.slice.call(arguments,2)):e}var Q=this;Q.options=n,Q.render=h,Q.destroy=f,Q.refetchEvents=F,Q.reportEvents=M,Q.reportEventChange=$,Q.rerenderEvents=I,Q.changeView=y,Q.select=E,Q.unselect=P,Q.prev=R,Q.next=z,Q.prevYear=L,Q.nextYear=W,Q.today=H,Q.gotoDate=B,Q.incrementDate=q,Q.formatDate=function(t,e){return x(t,e,n)},Q.formatDates=function(t,e,i){return w(t,e,i,n)},Q.getDate=U,Q.getView=V,Q.option=Y,Q.trigger=X,s.call(Q,n,c);var G,J,K,Z,te,ee,ie,ne,ae,se=Q.isFetchNeeded,oe=Q.fetchEvents,re=i[0],le={},ce=0,he=0,ue=new Date,de=[];m(ue,n.year,n.month,n.date),n.droppable&&t(document).bind("dragstart",function(e,i){var a=e.target,s=t(a);if(!s.parents(".fc").length){var o=n.dropAccept;(t.isFunction(o)?o.call(a,s):s.is(o))&&(ae=a,te.dragStart(ae,e,i))}}).bind("dragstop",function(t,e){ae&&(te.dragStop(ae,t,e),ae=null)})}function a(i,n){function a(){p=n.theme?"ui":"fc";var i=n.header;return i?f=t("<table class='fc-header' style='width:100%'/>").append(t("<tr/>").append(o("left")).append(o("center")).append(o("right"))):e}function s(){f.remove()}function o(e){var a=t("<td class='fc-header-"+e+"'/>"),s=n.header[e];return s&&t.each(s.split(" "),function(e){e>0&&a.append("<span class='fc-header-space'/>");var s;t.each(this.split(","),function(e,o){if("title"==o)a.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),s&&s.addClass(p+"-corner-right"),s=null;else{var r;if(i[o]?r=i[o]:we[o]&&(r=function(){h.removeClass(p+"-state-hover"),i.changeView(o)}),r){var l=n.theme?U(n.buttonIcons,o):null,c=U(n.buttonText,o),h=t("<span class='fc-button fc-button-"+o+" "+p+"-state-default'>"+(l?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+l+"'/>"+"</span>":c)+"</span>").click(function(){h.hasClass(p+"-state-disabled")||r()}).mousedown(function(){h.not("."+p+"-state-active").not("."+p+"-state-disabled").addClass(p+"-state-down")}).mouseup(function(){h.removeClass(p+"-state-down")}).hover(function(){h.not("."+p+"-state-active").not("."+p+"-state-disabled").addClass(p+"-state-hover")},function(){h.removeClass(p+"-state-hover").removeClass(p+"-state-down")}).appendTo(a);X(h),s||h.addClass(p+"-corner-left"),s=h}}}),s&&s.addClass(p+"-corner-right")}),a}function r(t){f.find("h2").html(t)}function l(t){f.find("span.fc-button-"+t).addClass(p+"-state-active")}function c(t){f.find("span.fc-button-"+t).removeClass(p+"-state-active")}function h(t){f.find("span.fc-button-"+t).addClass(p+"-state-disabled")}function u(t){f.find("span.fc-button-"+t).removeClass(p+"-state-disabled")}var d=this;d.render=a,d.destroy=s,d.updateTitle=r,d.activateButton=l,d.deactivateButton=c,d.disableButton=h,d.enableButton=u;var p,f=t([])}function s(i,n){function a(t,e){return!k||k>t||e>S}function s(t,e){k=t,S=e,P=[];var i=++I,n=$.length;A=n;for(var a=0;n>a;a++)o($[a],i)}function o(e,n){r(e,function(a){if(n==I){if(a){i.eventDataTransform&&(a=t.map(a,i.eventDataTransform)),e.eventDataTransform&&(a=t.map(a,e.eventDataTransform));for(var s=0;a.length>s;s++)a[s].source=e,b(a[s]);P=P.concat(a)}A--,A||F(P)}})}function r(n,a){var s,o,l=xe.sourceFetchers;for(s=0;l.length>s;s++){if(o=l[s](n,k,S,a),o===!0)return;if("object"==typeof o)return r(o,a),e}var c=n.events;if(c)t.isFunction(c)?(m(),c(d(k),d(S),function(t){a(t),y()})):t.isArray(c)?a(c):a();else{var h=n.url;if(h){var u=n.success,p=n.error,f=n.complete,g=t.extend({},n.data||{}),v=Z(n.startParam,i.startParam),b=Z(n.endParam,i.endParam);v&&(g[v]=Math.round(+k/1e3)),b&&(g[b]=Math.round(+S/1e3)),m(),t.ajax(t.extend({},_e,n,{data:g,success:function(e){e=e||[];var i=K(u,this,arguments);t.isArray(i)&&(e=i),a(e)},error:function(){K(p,this,arguments),a()},complete:function(){K(f,this,arguments),y()}}))}else a()}}function l(t){t=c(t),t&&(A++,o(t,I))}function c(i){return t.isFunction(i)||t.isArray(i)?i={events:i}:"string"==typeof i&&(i={url:i}),"object"==typeof i?(x(i),$.push(i),i):e}function h(e){$=t.grep($,function(t){return!w(t,e)}),P=t.grep(P,function(t){return!w(t.source,e)}),F(P)}function u(t){var e,i,n=P.length,a=T().defaultEventEnd,s=t.start-t._start,o=t.end?t.end-(t._end||a(t)):0;for(e=0;n>e;e++)i=P[e],i._id==t._id&&i!=t&&(i.start=new Date(+i.start+s),i.end=t.end?i.end?new Date(+i.end+o):new Date(+a(i)+o):null,i.title=t.title,i.url=t.url,i.allDay=t.allDay,i.className=t.className,i.editable=t.editable,i.color=t.color,i.backgroudColor=t.backgroudColor,i.borderColor=t.borderColor,i.textColor=t.textColor,b(i));b(t),F(P)}function p(t,e){b(t),t.source||(e&&(M.events.push(t),t.source=M),P.push(t)),F(P)}function f(e){if(e){if(!t.isFunction(e)){var i=e+"";e=function(t){return t._id==i}}P=t.grep(P,e,!0);for(var n=0;$.length>n;n++)t.isArray($[n].events)&&($[n].events=t.grep($[n].events,e,!0))}else{P=[];for(var n=0;$.length>n;n++)t.isArray($[n].events)&&($[n].events=[])}F(P)}function g(e){return t.isFunction(e)?t.grep(P,e):e?(e+="",t.grep(P,function(t){return t._id==e})):P}function m(){E++||D("loading",null,!0)}function y(){--E||D("loading",null,!1)}function b(t){var n=t.source||{},a=Z(n.ignoreTimezone,i.ignoreTimezone);t._id=t._id||(t.id===e?"_fc"+Ce++:t.id+""),t.date&&(t.start||(t.start=t.date),delete t.date),t._start=d(t.start=v(t.start,a)),t.end=v(t.end,a),t.end&&t.end<=t.start&&(t.end=null),t._end=t.end?d(t.end):null,t.allDay===e&&(t.allDay=Z(n.allDayDefault,i.allDayDefault)),t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[]}function x(t){t.className?"string"==typeof t.className&&(t.className=t.className.split(/\s+/)):t.className=[];for(var e=xe.sourceNormalizers,i=0;e.length>i;i++)e[i](t)}function w(t,e){return t&&e&&_(t)==_(e)}function _(t){return("object"==typeof t?t.events||t.url:"")||t}var C=this;C.isFetchNeeded=a,C.fetchEvents=s,C.addEventSource=l,C.removeEventSource=h,C.updateEvent=u,C.renderEvent=p,C.removeEvents=f,C.clientEvents=g,C.normalizeEvent=b;for(var k,S,D=C.trigger,T=C.getView,F=C.reportEvents,M={events:[]},$=[M],I=0,A=0,E=0,P=[],R=0;n.length>R;R++)c(n[R])}function o(t,e,i){return t.setFullYear(t.getFullYear()+e),i||u(t),t}function r(t,e,i){if(+t){var n=t.getMonth()+e,a=d(t);for(a.setDate(1),a.setMonth(n),t.setMonth(n),i||u(t);t.getMonth()!=a.getMonth();)t.setDate(t.getDate()+(a>t?1:-1))}return t}function l(t,e,i){if(+t){var n=t.getDate()+e,a=d(t);a.setHours(9),a.setDate(n),t.setDate(n),i||u(t),c(t,a)}return t}function c(t,e){if(+t)for(;t.getDate()!=e.getDate();)t.setTime(+t+(e>t?1:-1)*De)}function h(t,e){return t.setMinutes(t.getMinutes()+e),t}function u(t){return t.setHours(0),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t}function d(t,e){return e?u(new Date(+t)):new Date(+t)}function p(){var t,e=0;do t=new Date(1970,e++,1);while(t.getHours());return t}function f(t,e,i){for(e=e||1;!t.getDay()||i&&1==t.getDay()||!i&&6==t.getDay();)l(t,e);return t}function g(t,e){return Math.round((d(t,!0)-d(e,!0))/Se)}function m(t,i,n,a){i!==e&&i!=t.getFullYear()&&(t.setDate(1),t.setMonth(0),t.setFullYear(i)),n!==e&&n!=t.getMonth()&&(t.setDate(1),t.setMonth(n)),a!==e&&t.setDate(a)}function v(t,i){return"object"==typeof t?t:"number"==typeof t?new Date(1e3*t):"string"==typeof t?t.match(/^\d+(\.\d+)?$/)?new Date(1e3*parseFloat(t)):(i===e&&(i=!0),y(t,i)||(t?new Date(t):null)):null}function y(t,e){var i=t.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!i)return null;var n=new Date(i[1],0,1);if(e||!i[13]){var a=new Date(i[1],0,1,9,0);i[3]&&(n.setMonth(i[3]-1),a.setMonth(i[3]-1)),i[5]&&(n.setDate(i[5]),a.setDate(i[5])),c(n,a),i[7]&&n.setHours(i[7]),i[8]&&n.setMinutes(i[8]),i[10]&&n.setSeconds(i[10]),i[12]&&n.setMilliseconds(1e3*Number("0."+i[12])),c(n,a)}else if(n.setUTCFullYear(i[1],i[3]?i[3]-1:0,i[5]||1),n.setUTCHours(i[7]||0,i[8]||0,i[10]||0,i[12]?1e3*Number("0."+i[12]):0),i[14]){var s=60*Number(i[16])+(i[18]?Number(i[18]):0);s*="-"==i[15]?1:-1,n=new Date(+n+6e4*s)}return n}function b(t){if("number"==typeof t)return 60*t;if("object"==typeof t)return 60*t.getHours()+t.getMinutes();var e=t.match(/(\d+)(?::(\d+))?\s*(\w+)?/);if(e){var i=parseInt(e[1],10);return e[3]&&(i%=12,"p"==e[3].toLowerCase().charAt(0)&&(i+=12)),60*i+(e[2]?parseInt(e[2],10):0)}}function x(t,e,i){return w(t,null,e,i)}function w(t,e,i,n){n=n||ye;var a,s,o,r,l=t,c=e,h=i.length,u="";for(a=0;h>a;a++)if(s=i.charAt(a),"'"==s){for(o=a+1;h>o;o++)if("'"==i.charAt(o)){l&&(u+=o==a+1?"'":i.substring(a+1,o),a=o);break}}else if("("==s){for(o=a+1;h>o;o++)if(")"==i.charAt(o)){var d=x(l,i.substring(a+1,o),n);parseInt(d.replace(/\D/,""),10)&&(u+=d),a=o;break}}else if("["==s){for(o=a+1;h>o;o++)if("]"==i.charAt(o)){var p=i.substring(a+1,o),d=x(l,p,n);d!=x(c,p,n)&&(u+=d),a=o;break}}else if("{"==s)l=e,c=t;else if("}"==s)l=t,c=e;else{for(o=h;o>a;o--)if(r=Fe[i.substring(a,o)]){l&&(u+=r(l,n)),a=o-1;break}o==a&&l&&(u+=s)}return u}function _(t){var e,i=new Date(t.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),e=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((e-i)/864e5)/7)+1}function C(t){return t.end?k(t.end,t.allDay):l(d(t.start),1)}function k(t,e){return t=d(t),e||t.getHours()||t.getMinutes()?l(t,1):u(t)}function S(t,e){return 100*(e.msLength-t.msLength)+(t.event.start-e.event.start)}function D(t,e){return t.end>e.start&&t.start<e.end}function T(t,e,i,n){var a,s,o,r,l,c,h,u,p=[],f=t.length;for(a=0;f>a;a++)s=t[a],o=s.start,r=e[a],r>i&&n>o&&(i>o?(l=d(i),h=!1):(l=o,h=!0),r>n?(c=d(n),u=!1):(c=r,u=!0),p.push({event:s,start:l,end:c,isStart:h,isEnd:u,msLength:c-l}));return p.sort(S)}function F(t){var e,i,n,a,s,o=[],r=t.length;for(e=0;r>e;e++){for(i=t[e],n=0;;){if(a=!1,o[n])for(s=0;o[n].length>s;s++)if(D(o[n][s],i)){a=!0;break}if(!a)break;n++}o[n]?o[n].push(i):o[n]=[i]}return o}function M(i,n,a){i.unbind("mouseover").mouseover(function(i){for(var s,o,r,l=i.target;l!=this;)s=l,l=l.parentNode;(o=s._fci)!==e&&(s._fci=e,r=n[o],a(r.event,r.element,r),t(i.target).trigger(i)),i.stopPropagation()})}function $(e,i,n){for(var a,s=0;e.length>s;s++)a=t(e[s]),a.width(Math.max(0,i-A(a,n)))}function I(e,i,n){for(var a,s=0;e.length>s;s++)a=t(e[s]),a.height(Math.max(0,i-N(a,n)))}function A(t,e){return E(t)+R(t)+(e?P(t):0)}function E(e){return(parseFloat(t.css(e[0],"paddingLeft",!0))||0)+(parseFloat(t.css(e[0],"paddingRight",!0))||0)}function P(e){return(parseFloat(t.css(e[0],"marginLeft",!0))||0)+(parseFloat(t.css(e[0],"marginRight",!0))||0)}function R(e){return(parseFloat(t.css(e[0],"borderLeftWidth",!0))||0)+(parseFloat(t.css(e[0],"borderRightWidth",!0))||0)}function N(t,e){return z(t)+W(t)+(e?L(t):0)}function z(e){return(parseFloat(t.css(e[0],"paddingTop",!0))||0)+(parseFloat(t.css(e[0],"paddingBottom",!0))||0)}function L(e){return(parseFloat(t.css(e[0],"marginTop",!0))||0)+(parseFloat(t.css(e[0],"marginBottom",!0))||0)}function W(e){return(parseFloat(t.css(e[0],"borderTopWidth",!0))||0)+(parseFloat(t.css(e[0],"borderBottomWidth",!0))||0)}function O(t,e){e="number"==typeof e?e+"px":e,t.each(function(t,i){i.style.cssText+=";min-height:"+e+";_height:"+e})}function j(){}function H(t,e){return t-e}function B(t){return Math.max.apply(Math,t)}function q(t){return(10>t?"0":"")+t}function U(t,i){if(t[i]!==e)return t[i];for(var n,a=i.split(/(?=[A-Z])/),s=a.length-1;s>=0;s--)if(n=t[a[s].toLowerCase()],n!==e)return n;return t[""]}function V(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Y(t){return t.id+"/"+t.className+"/"+t.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/gi,"")}function X(t){t.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function Q(t){t.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function G(t,e){t.each(function(t,i){i.className=i.className.replace(/^fc-\w*/,"fc-"+ke[e.getDay()])})}function J(t,e){var i=t.source||{},n=t.color,a=i.color,s=e("eventColor"),o=t.backgroundColor||n||i.backgroundColor||a||e("eventBackgroundColor")||s,r=t.borderColor||n||i.borderColor||a||e("eventBorderColor")||s,l=t.textColor||i.textColor||e("eventTextColor"),c=[];return o&&c.push("background-color:"+o),r&&c.push("border-color:"+r),l&&c.push("color:"+l),c.join(";")}function K(e,i,n){if(t.isFunction(e)&&(e=[e]),e){var a,s;for(a=0;e.length>a;a++)s=e[a].apply(i,n)||s;return s}}function Z(){for(var t=0;arguments.length>t;t++)if(arguments[t]!==e)return arguments[t]}function te(t,e){function i(t,e){e&&(r(t,e),t.setDate(1));var i=d(t,!0);i.setDate(1);var c=r(d(i),1),h=d(i),u=d(c),p=a("firstDay"),g=a("weekends")?0:1;g&&(f(h),f(u,-1,!0)),l(h,-((h.getDay()-Math.max(p,g)+7)%7)),l(u,(7-u.getDay()+Math.max(p,g))%7);var m=Math.round((u-h)/(7*Se));"fixed"==a("weekMode")&&(l(u,7*(6-m)),m=6),n.title=o(i,a("titleFormat")),n.start=i,n.end=c,n.visStart=h,n.visEnd=u,s(m,g?5:7,!0)}var n=this;n.render=i,ne.call(n,t,e,"month");var a=n.opt,s=n.renderBasic,o=e.formatDate}function ee(t,e){function i(t,e){e&&l(t,7*e);var i=l(d(t),-((t.getDay()-a("firstDay")+7)%7)),r=l(d(i),7),c=d(i),h=d(r),u=a("weekends");u||(f(c),f(h,-1,!0)),n.title=o(c,l(d(h),-1),a("titleFormat")),n.start=i,n.end=r,n.visStart=c,n.visEnd=h,s(1,u?7:5,!1)}var n=this;n.render=i,ne.call(n,t,e,"basicWeek");var a=n.opt,s=n.renderBasic,o=e.formatDates}function ie(t,e){function i(t,e){e&&(l(t,e),a("weekends")||f(t,0>e?-1:1)),n.title=o(t,a("titleFormat")),n.start=n.visStart=d(t,!0),n.end=n.visEnd=l(d(n.start),1),s(1,1,!1)}var n=this;n.render=i,ne.call(n,t,e,"basicDay");var a=n.opt,s=n.renderBasic,o=e.formatDate}function ne(e,i,n){function a(t,e,i){ie=t,ne=e,s();var n=!q;n?o():Te(),r(i)}function s(){le=Se("isRTL"),le?(ce=-1,ue=ne-1):(ce=1,ue=0),me=Se("firstDay"),ye=Se("weekends")?0:1,be=Se("theme")?"ui":"fc",xe=Se("columnFormat"),we=Se("weekNumbers"),_e=Se("weekNumberTitle"),Ce="iso"!=Se("weekNumberCalculation")?"w":"W"}function o(){J=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(e)}function r(i){var n,a,s,o,r="",l=be+"-widget-header",c=be+"-widget-content",h=W.start.getMonth(),d=u(new Date);for(r+="<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>",we&&(r+="<th class='fc-week-number "+l+"'/>"),n=0;ne>n;n++)s=I(0,n),r+="<th class='fc-day-header fc-"+ke[s.getDay()]+" "+l+"'/>";for(r+="</tr></thead><tbody>",n=0;ie>n;n++){for(r+="<tr class='fc-week'>",we&&(r+="<td class='fc-week-number "+c+"'>"+"<div/>"+"</td>"),a=0;ne>a;a++)s=I(n,a),o=["fc-day","fc-"+ke[s.getDay()],c],s.getMonth()!=h&&o.push("fc-other-month"),+s==+d&&(o.push("fc-today"),o.push(be+"-state-highlight")),r+="<td class='"+o.join(" ")+"'"+" data-date='"+Ie(s,"yyyy-MM-dd")+"'"+">"+"<div>",i&&(r+="<div class='fc-day-number'>"+s.getDate()+"</div>"),r+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";r+="</tr>"}r+="</tbody></table>",z(),j&&j.remove(),j=t(r).appendTo(e),H=j.find("thead"),B=H.find(".fc-day-header"),q=j.find("tbody"),U=q.find("tr"),V=q.find(".fc-day"),Y=U.find("td:first-child"),G=U.eq(0).find(".fc-day-content > div"),Q(H.add(H.find("tr"))),Q(U),U.eq(0).addClass("fc-first"),U.filter(":last").addClass("fc-last"),we&&H.find(".fc-week-number").text(_e),B.each(function(e,i){var n=A(e);t(i).text(Ie(n,xe))}),we&&q.find(".fc-week-number > div").each(function(e,i){var n=I(e,0);t(i).text(Ie(n,Ce))}),V.each(function(e,i){var n=A(e);De("dayRender",W,n,t(i))}),p(V)}function c(e){Z=e;var i,n,a,s=Z-H.height();"variable"==Se("weekMode")?i=n=Math.floor(s/(1==ie?2:6)):(i=Math.floor(s/ie),n=s-i*(ie-1)),Y.each(function(e,s){ie>e&&(a=t(s),O(a.find("> div"),(e==ie-1?n:i)-N(a)))}),L()}function h(t){K=t,re.clear(),ee=0,we&&(ee=H.find("th.fc-week-number").outerWidth()),te=Math.floor((K-ee)/ne),$(B.slice(0,-1),te)}function p(t){t.click(f).mousedown($e)}function f(e){if(!Se("selectable")){var i=y(t(this).data("date"));De("dayClick",this,i,!0,e)}}function m(t,e,i){i&&se.build();for(var n=d(W.visStart),a=l(d(n),ne),s=0;ie>s;s++){var o=new Date(Math.max(n,t)),r=new Date(Math.min(a,e));if(r>o){var c,h;le?(c=g(r,n)*ce+ue+1,h=g(o,n)*ce+ue+1):(c=g(o,n),h=g(r,n)),p(v(s,c,s,h-1))}l(n,7),l(a,7)}}function v(t,i,n,a){var s=se.rect(t,i,n,a,e);return Fe(s,e)}function b(t){return d(t)}function x(t,e){m(t,l(d(e),1),!0)}function w(){Me()}function _(t,e,i){var n=F(t),a=V[n.row*ne+n.col];De("dayClick",a,t,e,i)}function C(t,e){oe.start(function(t){Me(),t&&v(t.row,t.col,t.row,t.col)},e)}function k(t,e,i){var n=oe.stop();if(Me(),n){var a=M(n);De("drop",t,a,!0,e,i)}}function S(t){return d(t.start)}function D(t){return re.left(t)}function T(t){return re.right(t)}function F(t){return{row:Math.floor(g(t,W.visStart)/7),col:E(t.getDay())}}function M(t){return I(t.row,t.col)}function I(t,e){return l(d(W.visStart),7*t+e*ce+ue)}function A(t){return I(Math.floor(t/ne),t%ne)}function E(t){return(t-Math.max(me,ye)+ne)%ne*ce+ue}function P(t){return U.eq(t)}function R(){var t=0;return we&&(t+=ee),{left:t,right:K}}function z(){O(e,e.height())}function L(){O(e,1)}var W=this;W.renderBasic=a,W.setHeight=c,W.setWidth=h,W.renderDayOverlay=m,W.defaultSelectionEnd=b,W.renderSelection=x,W.clearSelection=w,W.reportDayClick=_,W.dragStart=C,W.dragStop=k,W.defaultEventEnd=S,W.getHoverListener=function(){return oe},W.colContentLeft=D,W.colContentRight=T,W.dayOfWeekCol=E,W.dateCell=F,W.cellDate=M,W.cellIsAllDay=function(){return!0},W.allDayRow=P,W.allDayBounds=R,W.getRowCnt=function(){return ie},W.getColCnt=function(){return ne},W.getColWidth=function(){return te},W.getDaySegmentContainer=function(){return J},he.call(W,e,i,n),pe.call(W),de.call(W),ae.call(W);var j,H,B,q,U,V,Y,G,J,K,Z,te,ee,ie,ne,se,oe,re,le,ce,ue,me,ye,be,xe,we,_e,Ce,Se=W.opt,De=W.trigger,Te=W.clearEvents,Fe=W.renderOverlay,Me=W.clearOverlays,$e=W.daySelectionMousedown,Ie=i.formatDate;X(e.addClass("fc-grid")),se=new fe(function(e,i){var n,a,s;B.each(function(e,o){n=t(o),a=n.offset().left,e&&(s[1]=a),s=[a],i[e]=s}),s[1]=a+n.outerWidth(),U.each(function(i,o){ie>i&&(n=t(o),a=n.offset().top,i&&(s[1]=a),s=[a],e[i]=s)}),s[1]=a+n.outerHeight()}),oe=new ge(se),re=new ve(function(t){return G.eq(t)})}function ae(){function e(t,e){p(t),D(n(t),e),c("eventAfterAllRender")}function i(){f(),b().empty()}function n(e){var i,n,a,s,r,c,h=k(),u=S(),p=d(o.visStart),f=l(d(p),u),g=t.map(e,C),m=[];for(i=0;h>i;i++){for(n=F(T(e,g,p,f)),a=0;n.length>a;a++)for(s=n[a],r=0;s.length>r;r++)c=s[r],c.row=i,c.level=a,m.push(c);l(p,7),l(f,7)}return m}function a(t,e,i){h(t)&&s(t,e),i.isEnd&&u(t)&&M(t,e,i),g(t,e)}function s(t,e){var i,n=x();e.draggable({zIndex:9,delay:50,opacity:r("dragOpacity"),revertDuration:r("dragRevertDuration"),start:function(a,s){c("eventDragStart",e,t,a,s),v(t,e),n.start(function(n,a,s,o){e.draggable("option","revert",!n||!s&&!o),_(),n?(i=7*s+o*(r("isRTL")?-1:1),w(l(d(t.start),i),l(C(t),i))):i=0},a,"drag")},stop:function(a,s){n.stop(),_(),c("eventDragStop",e,t,a,s),i?y(this,t,i,0,t.allDay,a,s):(e.css("filter",""),m(t,e))}})}var o=this;o.renderEvents=e,o.compileDaySegs=n,o.clearEvents=i,o.bindDaySeg=a,ue.call(o);var r=o.opt,c=o.trigger,h=o.isEventDraggable,u=o.isEventResizable,p=o.reportEvents,f=o.reportEventClear,g=o.eventElementHandlers,m=o.showEvents,v=o.hideEvents,y=o.eventDrop,b=o.getDaySegmentContainer,x=o.getHoverListener,w=o.renderDayOverlay,_=o.clearOverlays,k=o.getRowCnt,S=o.getColCnt,D=o.renderDaySegs,M=o.resizableDayEvent}function se(t,e){function i(t,e){e&&l(t,7*e);var i=l(d(t),-((t.getDay()-a("firstDay")+7)%7)),r=l(d(i),7),c=d(i),h=d(r),u=a("weekends");u||(f(c),f(h,-1,!0)),n.title=o(c,l(d(h),-1),a("titleFormat")),n.start=i,n.end=r,n.visStart=c,n.visEnd=h,s(u?7:5)}var n=this;n.render=i,re.call(n,t,e,"agendaWeek");var a=n.opt,s=n.renderAgenda,o=e.formatDates}function oe(t,e){function i(t,e){e&&(l(t,e),a("weekends")||f(t,0>e?-1:1));var i=d(t,!0),r=l(d(i),1);n.title=o(t,a("titleFormat")),n.start=n.visStart=i,n.end=n.visEnd=r,s(1)}var n=this;n.render=i,re.call(n,t,e,"agendaDay");var a=n.opt,s=n.renderAgenda,o=e.formatDate}function re(i,n,a){function s(t){Ne=t,o(),te?ii():r(),c()}function o(){He=ti("theme")?"ui":"fc",qe=ti("weekends")?0:1,Be=ti("firstDay"),(Ue=ti("isRTL"))?(Ve=-1,Ye=Ne-1):(Ve=1,Ye=0),Xe=b(ti("minTime")),Qe=b(ti("maxTime")),Ge=ti("columnFormat"),Je=ti("weekNumbers"),Ke=ti("weekNumberTitle"),Ze="iso"!=ti("weekNumberCalculation")?"w":"W",Ee=ti("snapMinutes")||ti("slotMinutes")}function r(){var e,n,a,s,o,r=He+"-widget-header",l=He+"-widget-content",c=0==ti("slotMinutes")%15;for(e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr>",e+=Je?"<th class='fc-agenda-axis fc-week-number "+r+"'/>":"<th class='fc-agenda-axis "+r+"'>&nbsp;</th>",n=0;Ne>n;n++)e+="<th class='fc- fc-col"+n+" "+r+"'/>";for(e+="<th class='fc-agenda-gutter "+r+"'>&nbsp;</th>"+"</tr>"+"</thead>"+"<tbody>"+"<tr>"+"<th class='fc-agenda-axis "+r+"'>&nbsp;</th>",n=0;Ne>n;n++)e+="<td class='fc- fc-col"+n+" "+l+"'>"+"<div>"+"<div class='fc-day-content'>"+"<div style='position:relative'>&nbsp;</div>"+"</div>"+"</div>"+"</td>";for(e+="<td class='fc-agenda-gutter "+l+"'>&nbsp;</td>"+"</tr>"+"</tbody>"+"</table>",te=t(e).appendTo(i),ee=te.find("thead"),ie=ee.find("th").slice(1,-1),ne=te.find("tbody"),ae=ne.find("td").slice(0,-1),se=ae.find("div.fc-day-content div"),oe=ae.eq(0),re=oe.find("> div"),Q(ee.add(ee.find("tr"))),Q(ne.add(ne.find("tr"))),ke=ee.find("th:first"),Se=te.find(".fc-agenda-gutter"),ce=t("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(i),ti("allDaySlot")?(ue=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(ce),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+r+" fc-agenda-axis'>"+ti("allDayText")+"</th>"+"<td>"+"<div class='fc-day-content'><div style='position:relative'/></div>"+"</td>"+"<th class='"+r+" fc-agenda-gutter'>&nbsp;</th>"+"</tr>"+"</table>",me=t(e).appendTo(ce),ye=me.find("tr"),w(ye.find("td")),ke=ke.add(me.find("th:first")),Se=Se.add(me.find("th.fc-agenda-gutter")),ce.append("<div class='fc-agenda-divider "+r+"'>"+"<div class='fc-agenda-divider-inner'/>"+"</div>")):ue=t([]),be=t("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(ce),xe=t("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(be),we=t("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(xe),e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>",a=p(),s=h(d(a),Qe),h(a,Xe),ze=0,n=0;s>a;n++)o=a.getMinutes(),e+="<tr class='fc-slot"+n+" "+(o?"fc-minor":"")+"'>"+"<th class='fc-agenda-axis "+r+"'>"+(c&&o?"&nbsp;":ci(a,ti("axisFormat")))+"</th>"+"<td class='"+l+"'>"+"<div style='position:relative'>&nbsp;</div>"+"</td>"+"</tr>",h(a,ti("slotMinutes")),ze++;e+="</tbody></table>",_e=t(e).appendTo(xe),Ce=_e.find("div:first"),_(_e.find("td")),ke=ke.add(_e.find("th:first"))}function c(){var t,e,i,n,a=u(new Date);if(Je){var s=ci(E(0),Ze);Ue?s+=Ke:s=Ke+s,ee.find(".fc-week-number").text(s)}for(t=0;Ne>t;t++)n=E(t),e=ie.eq(t),e.html(ci(n,Ge)),i=ae.eq(t),+n==+a?i.addClass(He+"-state-highlight fc-today"):i.removeClass(He+"-state-highlight fc-today"),G(e.add(i),n)}function f(t,i){t===e&&(t=Fe),Fe=t,hi={};var n=ne.position().top,a=be.position().top,s=Math.min(t-n,_e.height()+a+1);re.height(s-N(oe)),ce.css("top",n),be.height(s-a-1),Ae=Ce.height()+1,Pe=ti("slotMinutes")/Ee,Re=Ae/Pe,i&&v()}function m(e){Te=e,Oe.clear(),Me=0,$(ke.width("").each(function(e,i){Me=Math.max(Me,t(i).outerWidth())}),Me);var i=be[0].clientWidth;Ie=be.width()-i,Ie?($(Se,Ie),Se.show().prev().removeClass("fc-last")):Se.hide().prev().addClass("fc-last"),$e=Math.floor((i-Me)/Ne),$(ie.slice(0,-1),$e)}function v(){function t(){be.scrollTop(n)}var e=p(),i=d(e);i.setHours(ti("firstHour"));var n=z(e,i)+1;t(),setTimeout(t,0)}function y(){je=be.scrollTop()}function x(){be.scrollTop(je)}function w(t){t.click(C).mousedown(ri)}function _(t){t.click(C).mousedown(V)}function C(t){if(!ti("selectable")){var e=Math.min(Ne-1,Math.floor((t.pageX-te.offset().left-Me)/$e)),i=E(e),n=this.parentNode.className.match(/fc-slot(\d+)/);if(n){var a=parseInt(n[1])*ti("slotMinutes"),s=Math.floor(a/60);i.setHours(s),i.setMinutes(a%60+Xe),ei("dayClick",ae[e],i,!1,t)}else ei("dayClick",ae[e],i,!0,t)}}function k(t,e,i){i&&Le.build();var n,a,s=d(Z.visStart);Ue?(n=g(e,s)*Ve+Ye+1,a=g(t,s)*Ve+Ye+1):(n=g(t,s),a=g(e,s)),n=Math.max(0,n),a=Math.min(Ne,a),a>n&&w(S(0,n,0,a-1))}function S(t,e,i,n){var a=Le.rect(t,e,i,n,ce);return ni(a,ce)}function D(t,e){for(var i=d(Z.visStart),n=l(d(i),1),a=0;Ne>a;a++){var s=new Date(Math.max(i,t)),o=new Date(Math.min(n,e));if(o>s){var r=a*Ve+Ye,c=Le.rect(0,r,0,r,xe),h=z(i,s),u=z(i,o);c.top=h,c.height=u-h,_(ni(c,xe))}l(i,1),l(n,1)}}function T(t){return Oe.left(t)}function F(t){return Oe.right(t)}function M(t){return{row:Math.floor(g(t,Z.visStart)/7),col:R(t.getDay())}}function A(t){var e=E(t.col),i=t.row;return ti("allDaySlot")&&i--,i>=0&&h(e,Xe+i*Ee),e}function E(t){return l(d(Z.visStart),t*Ve+Ye)}function P(t){return ti("allDaySlot")&&!t.row}function R(t){return(t-Math.max(Be,qe)+Ne)%Ne*Ve+Ye}function z(t,i){if(t=d(t,!0),h(d(t),Xe)>i)return 0;if(i>=h(d(t),Qe))return _e.height();var n=ti("slotMinutes"),a=60*i.getHours()+i.getMinutes()-Xe,s=Math.floor(a/n),o=hi[s];return o===e&&(o=hi[s]=_e.find("tr:eq("+s+") td div")[0].offsetTop),Math.max(0,Math.round(o-1+Ae*(a%n/n)))}function L(){return{left:Me,right:Te-Ie}}function W(){return ye}function O(t){var e=d(t.start);return t.allDay?e:h(e,ti("defaultEventMinutes"))}function j(t,e){return e?d(t):h(d(t),ti("slotMinutes"))}function B(t,e,i){i?ti("allDaySlot")&&k(t,l(d(e),1),!0):q(t,e)}function q(e,i){var n=ti("selectHelper");if(Le.build(),n){var a=g(e,Z.visStart)*Ve+Ye;if(a>=0&&Ne>a){var s=Le.rect(0,a,0,a,xe),o=z(e,e),r=z(e,i);if(r>o){if(s.top=o,s.height=r-o,s.left+=2,s.width-=5,t.isFunction(n)){var l=n(e,i);l&&(s.position="absolute",s.zIndex=8,De=t(l).css(s).appendTo(xe))}else s.isStart=!0,s.isEnd=!0,De=t(li({title:"",start:e,end:i,className:["fc-select-helper"],editable:!1},s)),De.css("opacity",ti("dragOpacity"));De&&(_(De),xe.append(De),$(De,s.width,!0),I(De,s.height,!0))}}}else D(e,i)}function U(){ai(),De&&(De.remove(),De=null)}function V(e){if(1==e.which&&ti("selectable")){oi(e);var i;We.start(function(t,e){if(U(),t&&t.col==e.col&&!P(t)){var n=A(e),a=A(t);i=[n,h(d(n),Ee),a,h(d(a),Ee)].sort(H),q(i[0],i[3])}else i=null},e),t(document).one("mouseup",function(t){We.stop(),i&&(+i[0]==+i[1]&&Y(i[0],!1,t),si(i[0],i[3],!1,t))})}}function Y(t,e,i){ei("dayClick",ae[R(t.getDay())],t,e,i)}function J(t,e){We.start(function(t){if(ai(),t)if(P(t))S(t.row,t.col,t.row,t.col);else{var e=A(t),i=h(d(e),ti("defaultEventMinutes"));D(e,i)}},e)}function K(t,e,i){var n=We.stop();ai(),n&&ei("drop",t,A(n),P(n),e,i)}var Z=this;Z.renderAgenda=s,Z.setWidth=m,Z.setHeight=f,Z.beforeHide=y,Z.afterShow=x,Z.defaultEventEnd=O,Z.timePosition=z,Z.dayOfWeekCol=R,Z.dateCell=M,Z.cellDate=A,Z.cellIsAllDay=P,Z.allDayRow=W,Z.allDayBounds=L,Z.getHoverListener=function(){return We},Z.colContentLeft=T,Z.colContentRight=F,Z.getDaySegmentContainer=function(){return ue},Z.getSlotSegmentContainer=function(){return we},Z.getMinMinute=function(){return Xe},Z.getMaxMinute=function(){return Qe},Z.getBodyContent=function(){return xe},Z.getRowCnt=function(){return 1},Z.getColCnt=function(){return Ne},Z.getColWidth=function(){return $e},Z.getSnapHeight=function(){return Re},Z.getSnapMinutes=function(){return Ee},Z.defaultSelectionEnd=j,Z.renderDayOverlay=k,Z.renderSelection=B,Z.clearSelection=U,Z.reportDayClick=Y,Z.dragStart=J,Z.dragStop=K,he.call(Z,i,n,a),pe.call(Z),de.call(Z),le.call(Z);var te,ee,ie,ne,ae,se,oe,re,ce,ue,me,ye,be,xe,we,_e,Ce,ke,Se,De,Te,Fe,Me,$e,Ie,Ae,Ee,Pe,Re,Ne,ze,Le,We,Oe,je,He,Be,qe,Ue,Ve,Ye,Xe,Qe,Ge,Je,Ke,Ze,ti=Z.opt,ei=Z.trigger,ii=Z.clearEvents,ni=Z.renderOverlay,ai=Z.clearOverlays,si=Z.reportSelection,oi=Z.unselect,ri=Z.daySelectionMousedown,li=Z.slotSegHtml,ci=n.formatDate,hi={};X(i.addClass("fc-agenda")),Le=new fe(function(e,i){function n(t){return Math.max(l,Math.min(c,t))}var a,s,o;ie.each(function(e,n){a=t(n),s=a.offset().left,e&&(o[1]=s),o=[s],i[e]=o}),o[1]=s+a.outerWidth(),ti("allDaySlot")&&(a=ye,s=a.offset().top,e[0]=[s,s+a.outerHeight()]);for(var r=xe.offset().top,l=be.offset().top,c=l+be.outerHeight(),h=0;ze*Pe>h;h++)e.push([n(r+Re*h),n(r+Re*(h+1))])}),We=new ge(Le),Oe=new ve(function(t){return se.eq(t)})}function le(){function i(t,e){k(t);var i,n=t.length,o=[],l=[];for(i=0;n>i;i++)t[i].allDay?o.push(t[i]):l.push(t[i]);y("allDaySlot")&&(H(a(o),e),$()),r(s(l),e),b("eventAfterAllRender")}function n(){S(),E().empty(),P().empty()}function a(e){var i,n,a,s,o=F(T(e,t.map(e,C),v.visStart,v.visEnd)),r=o.length,l=[];for(i=0;r>i;i++)for(n=o[i],a=0;n.length>a;a++)s=n[a],s.row=0,s.level=i,l.push(s);return l}function s(e){var i,n,a,s,r,c,u=q(),p=L(),f=z(),g=h(d(v.visStart),p),m=t.map(e,o),y=[];for(i=0;u>i;i++){for(n=F(T(e,m,g,h(d(g),f-p))),ce(n),a=0;n.length>a;a++)for(s=n[a],r=0;s.length>r;r++)c=s[r],c.col=i,c.level=a,y.push(c);l(g,1,!0)}return y}function o(t){return t.end?d(t.end):h(d(t.start),y("defaultEventMinutes"))}function r(i,n){var a,s,o,r,l,h,u,d,f,g,m,v,x,w,_,C,k,S,D,T,F,$,I=i.length,E="",R={},z={},L=P(),H=q();for((T=y("isRTL"))?(F=-1,$=H-1):(F=1,$=0),a=0;I>a;a++)s=i[a],o=s.event,r=W(s.start,s.start),l=W(s.start,s.end),h=s.col,u=s.level,d=s.forward||0,f=O(h*F+$),g=j(h*F+$)-f,g=Math.min(g-6,.95*g),m=u?g/(u+d+1):d?2*(g/(d+1)-6):g,v=f+g/(u+d+1)*u*F+(T?g-m:0),s.top=r,s.left=v,s.outerWidth=m,s.outerHeight=l-r,E+=c(o,s);for(L[0].innerHTML=E,x=L.children(),a=0;I>a;a++)s=i[a],o=s.event,w=t(x[a]),_=b("eventRender",o,o,w),_===!1?w.remove():(_&&_!==!0&&(w.remove(),w=t(_).css({position:"absolute",top:s.top,left:s.left}).appendTo(L)),s.element=w,o._id===n?p(o,w,s):w[0]._fci=a,K(o,w));for(M(L,i,p),a=0;I>a;a++)s=i[a],(w=s.element)&&(k=R[C=s.key=Y(w[0])],s.vsides=k===e?R[C]=N(w,!0):k,k=z[C],s.hsides=k===e?z[C]=A(w,!0):k,S=w.find(".fc-event-title"),S.length&&(s.contentTop=S[0].offsetTop));for(a=0;I>a;a++)s=i[a],(w=s.element)&&(w[0].style.width=Math.max(0,s.outerWidth-s.hsides)+"px",D=Math.max(0,s.outerHeight-s.vsides),w[0].style.height=D+"px",o=s.event,s.contentTop!==e&&10>D-s.contentTop&&(w.find("div.fc-event-time").text(oe(o.start,y("timeFormat"))+" - "+o.title),w.find("div.fc-event-title").remove()),b("eventAfterRender",o,o,w))
}function c(t,e){var i="<",n=t.url,a=J(t,y),s=["fc-event","fc-event-vert"];return x(t)&&s.push("fc-event-draggable"),e.isStart&&s.push("fc-event-start"),e.isEnd&&s.push("fc-event-end"),s=s.concat(t.className),t.source&&(s=s.concat(t.source.className||[])),i+=n?"a href='"+V(t.url)+"'":"div",i+=" class='"+s.join(" ")+"'"+" style='position:absolute;z-index:8;top:"+e.top+"px;left:"+e.left+"px;"+a+"'"+">"+"<div class='fc-event-inner'>"+"<div class='fc-event-time'>"+V(re(t.start,t.end,y("timeFormat")))+"</div>"+"<div class='fc-event-title'>"+V(t.title)+"</div>"+"</div>"+"<div class='fc-event-bg'></div>",e.isEnd&&w(t)&&(i+="<div class='ui-resizable-handle ui-resizable-s'>=</div>"),i+="</"+(n?"a":"div")+">"}function u(t,e,i){x(t)&&f(t,e,i.isStart),i.isEnd&&w(t)&&B(t,e,i),D(t,e)}function p(t,e,i){var n=e.find("div.fc-event-time");x(t)&&g(t,e,n),i.isEnd&&w(t)&&m(t,e,n),D(t,e)}function f(t,e,i){function n(){r||(e.width(a).height("").draggable("option","grid",null),r=!0)}var a,s,o,r=!0,c=y("isRTL")?-1:1,h=R(),u=U(),p=X(),f=Q(),g=L();e.draggable({zIndex:9,opacity:y("dragOpacity","month"),revertDuration:y("dragRevertDuration"),start:function(g,m){b("eventDragStart",e,t,g,m),te(t,e),a=e.width(),h.start(function(a,h,g,m){ae(),a?(s=!1,o=m*c,a.row?i?r&&(e.width(u-10),I(e,p*Math.round((t.end?(t.end-t.start)/Te:y("defaultEventMinutes"))/f)),e.draggable("option","grid",[u,1]),r=!1):s=!0:(ne(l(d(t.start),o),l(C(t),o)),n()),s=s||r&&!o):(n(),s=!0),e.draggable("option","revert",s)},g,"drag")},stop:function(i,a){if(h.stop(),ae(),b("eventDragStop",e,t,i,a),s)n(),e.css("filter",""),Z(t,e);else{var l=0;r||(l=Math.round((e.offset().top-G().offset().top)/p)*f+g-(60*t.start.getHours()+t.start.getMinutes())),ee(this,t,o,l,r,i,a)}}})}function g(t,e,i){function n(e){var n,a=h(d(t.start),e);t.end&&(n=h(d(t.end),e)),i.text(re(a,n,y("timeFormat")))}function a(){u&&(i.css("display",""),e.draggable("option","grid",[m,v]),u=!1)}var s,o,r,c,u=!1,p=y("isRTL")?-1:1,f=R(),g=q(),m=U(),v=X(),x=Q();e.draggable({zIndex:9,scroll:!1,grid:[m,v],axis:1==g?"y":!1,opacity:y("dragOpacity"),revertDuration:y("dragRevertDuration"),start:function(n,h){b("eventDragStart",e,t,n,h),te(t,e),s=e.position(),r=c=0,f.start(function(n,s,r,c){e.draggable("option","revert",!n),ae(),n&&(o=c*p,y("allDaySlot")&&!n.row?(u||(u=!0,i.hide(),e.draggable("option","grid",null)),ne(l(d(t.start),o),l(C(t),o))):a())},n,"drag")},drag:function(t,e){r=Math.round((e.position.top-s.top)/v)*x,r!=c&&(u||n(r),c=r)},stop:function(i,l){var c=f.stop();ae(),b("eventDragStop",e,t,i,l),c&&(o||r||u)?ee(this,t,o,u?0:r,u,i,l):(a(),e.css("filter",""),e.css(s),n(0),Z(t,e))}})}function m(t,e,i){var n,a,s=X(),o=Q();e.resizable({handles:{s:".ui-resizable-handle"},grid:s,start:function(i,s){n=a=0,te(t,e),e.css("z-index",9),b("eventResizeStart",this,t,i,s)},resize:function(r,l){n=Math.round((Math.max(s,e.height())-l.originalSize.height)/s),n!=a&&(i.text(re(t.start,n||t.end?h(_(t),o*n):null,y("timeFormat"))),a=n)},stop:function(i,a){b("eventResizeStop",this,t,i,a),n?ie(this,t,0,o*n,i,a):(e.css("z-index",8),Z(t,e))}})}var v=this;v.renderEvents=i,v.compileDaySegs=a,v.clearEvents=n,v.slotSegHtml=c,v.bindDaySeg=u,ue.call(v);var y=v.opt,b=v.trigger,x=v.isEventDraggable,w=v.isEventResizable,_=v.eventEnd,k=v.reportEvents,S=v.reportEventClear,D=v.eventElementHandlers,$=v.setHeight,E=v.getDaySegmentContainer,P=v.getSlotSegmentContainer,R=v.getHoverListener,z=v.getMaxMinute,L=v.getMinMinute,W=v.timePosition,O=v.colContentLeft,j=v.colContentRight,H=v.renderDaySegs,B=v.resizableDayEvent,q=v.getColCnt,U=v.getColWidth,X=v.getSnapHeight,Q=v.getSnapMinutes,G=v.getBodyContent,K=v.reportEventElement,Z=v.showEvents,te=v.hideEvents,ee=v.eventDrop,ie=v.eventResize,ne=v.renderDayOverlay,ae=v.clearOverlays,se=v.calendar,oe=se.formatDate,re=se.formatDates}function ce(t){var e,i,n,a,s,o;for(e=t.length-1;e>0;e--)for(a=t[e],i=0;a.length>i;i++)for(s=a[i],n=0;t[e-1].length>n;n++)o=t[e-1][n],D(s,o)&&(o.forward=Math.max(o.forward||0,(s.forward||0)+1))}function he(t,i,n){function a(t,e){var i=I[t];return"object"==typeof i?U(i,e||n):i}function s(t,e){return i.trigger.apply(i,[t,e||k].concat(Array.prototype.slice.call(arguments,2),[k]))}function o(t){return c(t)&&!a("disableDragging")}function r(t){return c(t)&&!a("disableResizing")}function c(t){return Z(t.editable,(t.source||{}).editable,a("editable"))}function u(t){F={};var e,i,n=t.length;for(e=0;n>e;e++)i=t[e],F[i._id]?F[i._id].push(i):F[i._id]=[i]}function p(t){return t.end?d(t.end):S(t)}function f(t,e){M.push(e),$[t._id]?$[t._id].push(e):$[t._id]=[e]}function g(){M=[],$={}}function m(t,i){i.click(function(n){return i.hasClass("ui-draggable-dragging")||i.hasClass("ui-resizable-resizing")?e:s("eventClick",this,t,n)}).hover(function(e){s("eventMouseover",this,t,e)},function(e){s("eventMouseout",this,t,e)})}function v(t,e){b(t,e,"show")}function y(t,e){b(t,e,"hide")}function b(t,e,i){var n,a=$[t._id],s=a.length;for(n=0;s>n;n++)e&&a[n][0]==e[0]||a[n][i]()}function x(t,e,i,n,a,o,r){var l=e.allDay,c=e._id;_(F[c],i,n,a),s("eventDrop",t,e,i,n,a,function(){_(F[c],-i,-n,l),T(c)},o,r),T(c)}function w(t,e,i,n,a,o){var r=e._id;C(F[r],i,n),s("eventResize",t,e,i,n,function(){C(F[r],-i,-n),T(r)},a,o),T(r)}function _(t,i,n,a){n=n||0;for(var s,o=t.length,r=0;o>r;r++)s=t[r],a!==e&&(s.allDay=a),h(l(s.start,i,!0),n),s.end&&(s.end=h(l(s.end,i,!0),n)),D(s,I)}function C(t,e,i){i=i||0;for(var n,a=t.length,s=0;a>s;s++)n=t[s],n.end=h(l(p(n),e,!0),i),D(n,I)}var k=this;k.element=t,k.calendar=i,k.name=n,k.opt=a,k.trigger=s,k.isEventDraggable=o,k.isEventResizable=r,k.reportEvents=u,k.eventEnd=p,k.reportEventElement=f,k.reportEventClear=g,k.eventElementHandlers=m,k.showEvents=v,k.hideEvents=y,k.eventDrop=x,k.eventResize=w;var S=k.defaultEventEnd,D=i.normalizeEvent,T=i.reportEventChange,F={},M=[],$={},I=i.options}function ue(){function i(t,e){var i,n,l,d,m,v,y,b,x=W(),w=T(),_=F(),C=0,k=t.length;for(x[0].innerHTML=a(t),s(t,x.children()),o(t),r(t,x,e),c(t),h(t),u(t),i=p(),n=0;w>n;n++){for(l=0,d=[],m=0;_>m;m++)d[m]=0;for(;k>C&&(v=t[C]).row==n;){for(y=B(d.slice(v.startCol,v.endCol)),v.top=y,y+=v.outerHeight,b=v.startCol;v.endCol>b;b++)d[b]=y;C++}i[n].height(B(d))}g(t,f(i))}function n(e,i,n){var o,r,l,d=t("<div/>"),m=W(),v=e.length;for(d[0].innerHTML=a(e),o=d.children(),m.append(o),s(e,o),c(e),h(e),u(e),g(e,f(p())),o=[],r=0;v>r;r++)l=e[r].element,l&&(e[r].row===i&&l.css("top",n),o.push(l[0]));return t(o)}function a(t){var e,i,n,a,s,o,r,l,c,h,u=y("isRTL"),d=t.length,p=I(),f=p.left,g=p.right,m="";for(e=0;d>e;e++)i=t[e],n=i.event,s=["fc-event","fc-event-hori"],x(n)&&s.push("fc-event-draggable"),i.isStart&&s.push("fc-event-start"),i.isEnd&&s.push("fc-event-end"),u?(o=R(i.end.getDay()-1),r=R(i.start.getDay()),l=i.isEnd?E(o):f,c=i.isStart?P(r):g):(o=R(i.start.getDay()),r=R(i.end.getDay()-1),l=i.isStart?E(o):f,c=i.isEnd?P(r):g),s=s.concat(n.className),n.source&&(s=s.concat(n.source.className||[])),a=n.url,h=J(n,y),m+=a?"<a href='"+V(a)+"'":"<div",m+=" class='"+s.join(" ")+"'"+" style='position:absolute;z-index:8;left:"+l+"px;"+h+"'"+">"+"<div class='fc-event-inner'>",!n.allDay&&i.isStart&&(m+="<span class='fc-event-time'>"+V(j(n.start,n.end,y("timeFormat")))+"</span>"),m+="<span class='fc-event-title'>"+V(n.title)+"</span>"+"</div>",i.isEnd&&w(n)&&(m+="<div class='ui-resizable-handle ui-resizable-"+(u?"w":"e")+"'>"+"&nbsp;&nbsp;&nbsp;"+"</div>"),m+="</"+(a?"a":"div")+">",i.left=l,i.outerWidth=c-l,i.startCol=o,i.endCol=r+1;return m}function s(e,i){var n,a,s,o,r,l=e.length;for(n=0;l>n;n++)a=e[n],s=a.event,o=t(i[n]),r=b("eventRender",s,s,o),r===!1?o.remove():(r&&r!==!0&&(r=t(r).css({position:"absolute",left:a.left}),o.replaceWith(r),o=r),a.element=o)}function o(t){var e,i,n,a=t.length;for(e=0;a>e;e++)i=t[e],n=i.element,n&&C(i.event,n)}function r(t,e,i){var n,a,s,o,r=t.length;for(n=0;r>n;n++)a=t[n],s=a.element,s&&(o=a.event,o._id===i?O(o,s,a):s[0]._fci=n);M(e,t,O)}function c(t){var i,n,a,s,o,r=t.length,l={};for(i=0;r>i;i++)n=t[i],a=n.element,a&&(s=n.key=Y(a[0]),o=l[s],o===e&&(o=l[s]=A(a,!0)),n.hsides=o)}function h(t){var e,i,n,a=t.length;for(e=0;a>e;e++)i=t[e],n=i.element,n&&(n[0].style.width=Math.max(0,i.outerWidth-i.hsides)+"px")}function u(t){var i,n,a,s,o,r=t.length,l={};for(i=0;r>i;i++)n=t[i],a=n.element,a&&(s=n.key,o=l[s],o===e&&(o=l[s]=L(a)),n.outerHeight=a[0].offsetHeight+o)}function p(){var t,e=T(),i=[];for(t=0;e>t;t++)i[t]=$(t).find("div.fc-day-content > div");return i}function f(t){var e,i=t.length,n=[];for(e=0;i>e;e++)n[e]=t[e][0].offsetTop;return n}function g(t,e){var i,n,a,s,o=t.length;for(i=0;o>i;i++)n=t[i],a=n.element,a&&(a[0].style.top=e[n.row]+(n.top||0)+"px",s=n.event,b("eventAfterRender",s,s,a))}function m(e,i,a){var s=y("isRTL"),o=s?"w":"e",r=i.find(".ui-resizable-"+o),c=!1;X(i),i.mousedown(function(t){t.preventDefault()}).click(function(t){c&&(t.preventDefault(),t.stopImmediatePropagation())}),r.mousedown(function(r){function h(i){b("eventResizeStop",this,e,i),t("body").css("cursor",""),f.stop(),q(),u&&D(this,e,u,0,i),setTimeout(function(){c=!1},0)}if(1==r.which){c=!0;var u,p,f=v.getHoverListener(),g=T(),m=F(),y=s?-1:1,x=s?m-1:0,w=i.css("top"),C=t.extend({},e),M=N(e.start);U(),t("body").css("cursor",o+"-resize").one("mouseup",h),b("eventResizeStart",this,e,r),f.start(function(t,i){if(t){var r=Math.max(M.row,t.row),c=t.col;1==g&&(r=0),r==M.row&&(c=s?Math.min(M.col,c):Math.max(M.col,c)),u=7*r+c*y+x-(7*i.row+i.col*y+x);var h=l(_(e),u,!0);if(u){C.end=h;var f=p;p=n(z([C]),a.row,w),p.find("*").css("cursor",o+"-resize"),f&&f.remove(),S(e)}else p&&(k(e),p.remove(),p=null);q(),H(e.start,l(d(h),1))}},r)}})}var v=this;v.renderDaySegs=i,v.resizableDayEvent=m;var y=v.opt,b=v.trigger,x=v.isEventDraggable,w=v.isEventResizable,_=v.eventEnd,C=v.reportEventElement,k=v.showEvents,S=v.hideEvents,D=v.eventResize,T=v.getRowCnt,F=v.getColCnt;v.getColWidth;var $=v.allDayRow,I=v.allDayBounds,E=v.colContentLeft,P=v.colContentRight,R=v.dayOfWeekCol,N=v.dateCell,z=v.compileDaySegs,W=v.getDaySegmentContainer,O=v.bindDaySeg,j=v.calendar.formatDates,H=v.renderDayOverlay,q=v.clearOverlays,U=v.clearSelection}function de(){function e(t,e,a){i(),e||(e=l(t,a)),c(t,e,a),n(t,e,a)}function i(t){u&&(u=!1,h(),r("unselect",null,t))}function n(t,e,i,n){u=!0,r("select",null,t,e,i,n)}function a(e){var a=s.cellDate,r=s.cellIsAllDay,l=s.getHoverListener(),u=s.reportDayClick;if(1==e.which&&o("selectable")){i(e);var d;l.start(function(t,e){h(),t&&r(t)?(d=[a(e),a(t)].sort(H),c(d[0],d[1],!0)):d=null},e),t(document).one("mouseup",function(t){l.stop(),d&&(+d[0]==+d[1]&&u(d[0],!0,t),n(d[0],d[1],!0,t))})}}var s=this;s.select=e,s.unselect=i,s.reportSelection=n,s.daySelectionMousedown=a;var o=s.opt,r=s.trigger,l=s.defaultSelectionEnd,c=s.renderSelection,h=s.clearSelection,u=!1;o("selectable")&&o("unselectAuto")&&t(document).mousedown(function(e){var n=o("unselectCancel");n&&t(e.target).parents(n).length||i(e)})}function pe(){function e(e,i){var n=s.shift();return n||(n=t("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>")),n[0].parentNode!=i[0]&&n.appendTo(i),a.push(n.css(e).show()),n}function i(){for(var t;t=a.shift();)s.push(t.hide().unbind())}var n=this;n.renderOverlay=e,n.clearOverlays=i;var a=[],s=[]}function fe(t){var e,i,n=this;n.build=function(){e=[],i=[],t(e,i)},n.cell=function(t,n){var a,s=e.length,o=i.length,r=-1,l=-1;for(a=0;s>a;a++)if(n>=e[a][0]&&e[a][1]>n){r=a;break}for(a=0;o>a;a++)if(t>=i[a][0]&&i[a][1]>t){l=a;break}return r>=0&&l>=0?{row:r,col:l}:null},n.rect=function(t,n,a,s,o){var r=o.offset();return{top:e[t][0]-r.top,left:i[n][0]-r.left,width:i[s][1]-i[n][0],height:e[a][1]-e[t][0]}}}function ge(e){function i(t){me(t);var i=e.cell(t.pageX,t.pageY);(!i!=!o||i&&(i.row!=o.row||i.col!=o.col))&&(i?(s||(s=i),a(i,s,i.row-s.row,i.col-s.col)):a(i,s),o=i)}var n,a,s,o,r=this;r.start=function(r,l,c){a=r,s=o=null,e.build(),i(l),n=c||"mousemove",t(document).bind(n,i)},r.stop=function(){return t(document).unbind(n,i),o}}function me(t){t.pageX===e&&(t.pageX=t.originalEvent.pageX,t.pageY=t.originalEvent.pageY)}function ve(t){function i(e){return a[e]=a[e]||t(e)}var n=this,a={},s={},o={};n.left=function(t){return s[t]=s[t]===e?i(t).position().left:s[t]},n.right=function(t){return o[t]=o[t]===e?n.left(t)+i(t).width():o[t]},n.clear=function(){a={},s={},o={}}}var ye={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},be={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},xe=t.fullCalendar={version:"1.6.1"},we=xe.views={};t.fn.fullCalendar=function(i){if("string"==typeof i){var a,s=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=t.data(this,"fullCalendar");if(n&&t.isFunction(n[i])){var o=n[i].apply(n,s);a===e&&(a=o),"destroy"==i&&t.removeData(this,"fullCalendar")}}),a!==e?a:this}var o=i.eventSources||[];return delete i.eventSources,i.events&&(o.push(i.events),delete i.events),i=t.extend(!0,{},ye,i.isRTL||i.isRTL===e&&ye.isRTL?be:{},i),this.each(function(e,a){var s=t(a),r=new n(s,i,o);s.data("fullCalendar",r),r.render()}),this},xe.sourceNormalizers=[],xe.sourceFetchers=[];var _e={dataType:"json",cache:!1},Ce=1;xe.addDays=l,xe.cloneDate=d,xe.parseDate=v,xe.parseISO8601=y,xe.parseTime=b,xe.formatDate=x,xe.formatDates=w;var ke=["sun","mon","tue","wed","thu","fri","sat"],Se=864e5,De=36e5,Te=6e4,Fe={s:function(t){return t.getSeconds()},ss:function(t){return q(t.getSeconds())},m:function(t){return t.getMinutes()},mm:function(t){return q(t.getMinutes())},h:function(t){return t.getHours()%12||12},hh:function(t){return q(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return q(t.getHours())},d:function(t){return t.getDate()},dd:function(t){return q(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return q(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return(t.getFullYear()+"").substring(2)},yyyy:function(t){return t.getFullYear()},t:function(t){return 12>t.getHours()?"a":"p"},tt:function(t){return 12>t.getHours()?"am":"pm"},T:function(t){return 12>t.getHours()?"A":"P"},TT:function(t){return 12>t.getHours()?"AM":"PM"},u:function(t){return x(t,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(t){var e=t.getDate();return e>10&&20>e?"th":["st","nd","rd"][e%10-1]||"th"},w:function(t,e){return e.weekNumberCalculation(t)},W:function(t){return _(t)}};xe.dateFormatters=Fe,xe.applyAll=K,we.month=te,we.basicWeek=ee,we.basicDay=ie,i({weekMode:"fixed"}),we.agendaWeek=se,we.agendaDay=oe,i({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:.5},minTime:0,maxTime:24})}(jQuery);